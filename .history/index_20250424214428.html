<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>イベント参加登録</title>
    <link rel="stylesheet" href="common/styles.css">
</head>
<body>
    <div class="container">
        <h1>イベント参加登録</h1>
        <form id="registration-form">
            <div id="event-selection-container"></div>
            <div class="form-actions">
                <button type="submit" class="submit-button">登録する</button>
            </div>
        </form>
    </div>
    <script src="common/events.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // サンプルイベントデータ
            const events = [
                { id: 1, name: '2024年4月1日 10:00-12:00 オンライン説明会' },
                { id: 2, name: '2024年4月3日 14:00-16:00 対面説明会' },
                { id: 3, name: '2024年4月5日 19:00-21:00 オンライン説明会' },
                { id: 4, name: '2024年4月8日 10:00-12:00 対面説明会' }
            ];

            // イベント選択UIを初期化
            const eventSelectionUI = createEventSelectionUI(events);
            document.getElementById('event-selection-container').appendChild(eventSelectionUI);

            // フォームの送信をハンドル
            document.getElementById('registration-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const selectedEvents = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
                    .map(cb => cb.dataset.eventName);
                
                if (selectedEvents.length === 0) {
                    alert('イベントを選択してください。');
                    return;
                }
                
                if (selectedEvents.length > 2) {
                    alert('イベントは2つまでしか選択できません。');
                    return;
                }
                
                alert('選択されたイベント:\n' + selectedEvents.join('\n'));
                // ここで実際のフォーム送信処理を行う
            });
        });
    </script>
</body>
</html>